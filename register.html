<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VedaVault - Register</title>
<style>
body{font-family:Arial;background:#fffbeb;padding:20px;}
.container{max-width:400px;margin:50px auto;background:#fff;padding:25px;border-radius:15px;box-shadow:0 8px 20px rgba(0,0,0,0.1);}
input{width:100%;padding:10px;margin:10px 0;border-radius:8px;border:1px solid #ddd;}
button{background:#d97706;color:#fff;border:none;padding:12px 20px;border-radius:10px;cursor:pointer;}
button:hover{background:#b45309;}
</style>
</head>
<body>

<div class="container">
<h2>Register</h2>
<input type="text" id="name" placeholder="Full Name">
<input type="email" id="email" placeholder="Email">
<input type="text" id="phone" placeholder="Phone">
<input type="text" id="address" placeholder="Address">
<input type="password" id="password" placeholder="Password">
<button id="register-btn">Register</button>
<p id="msg" style="color:red;"></p>
<p>Already have an account? <a href="login.html">Login</a></p>
</div>

<script>
document.getElementById("register-btn").addEventListener("click", async ()=>{
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const phone = document.getElementById("phone").value;
  const address = document.getElementById("address").value;
  const password = document.getElementById("password").value;

  const res = await fetch("/register",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({ name, email, phone, address, password })
  });

  const data = await res.json();

  if(data.error){
    document.getElementById("msg").textContent = data.error;
  } else {
    // Save user id to localStorage
    localStorage.setItem("user", JSON.stringify({
      id: data.userId,
      email: email
    }));

    // redirect to profile
    window.location.href = "profile.html";
  }
});
</script>
</body>
</html>
